(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f768f58"],{"3c3c":function(t,e,s){},"5a0c":function(t,e,s){!function(e,s){t.exports=s()}(0,(function(){"use strict";var t=1e3,e=6e4,s=36e5,r="millisecond",n="second",a="minute",c="hour",i="day",o="week",u="month",l="quarter",d="year",h="date",b="Invalid Date",O=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,s){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(s)+t},j={s:m,z:function(t){var e=-t.utcOffset(),s=Math.abs(e),r=Math.floor(s/60),n=s%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(n,2,"0")},m:function t(e,s){if(e.date()<s.date())return-t(s,e);var r=12*(s.year()-e.year())+(s.month()-e.month()),n=e.clone().add(r,u),a=s-n<0,c=e.clone().add(r+(a?-1:1),u);return+(-(r+(s-n)/(a?n-c:c-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:d,w:o,d:i,D:h,h:c,m:a,s:n,ms:r,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",g={};g[v]=f;var _=function(t){return t instanceof $},y=function t(e,s,r){var n;if(!e)return v;if("string"==typeof e){var a=e.toLowerCase();g[a]&&(n=a),s&&(g[a]=s,n=a);var c=e.split("-");if(!n&&c.length>1)return t(c[0])}else{var i=e.name;g[i]=e,n=i}return!r&&n&&(v=n),n||!r&&v},w=function(t,e){if(_(t))return t.clone();var s="object"==typeof e?e:{};return s.date=t,s.args=arguments,new $(s)},k=j;k.l=y,k.i=_,k.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var $=function(){function f(t){this.$L=y(t.locale,null,!0),this.parse(t)}var m=f.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,s=t.utc;if(null===e)return new Date(NaN);if(k.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(O);if(r){var n=r[2]-1||0,a=(r[7]||"0").substring(0,3);return s?new Date(Date.UTC(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return k},m.isValid=function(){return!(this.$d.toString()===b)},m.isSame=function(t,e){var s=w(t);return this.startOf(e)<=s&&s<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,s){return k.u(t)?this[e]:this.set(s,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var s=this,r=!!k.u(e)||e,l=k.p(t),b=function(t,e){var n=k.w(s.$u?Date.UTC(s.$y,e,t):new Date(s.$y,e,t),s);return r?n:n.endOf(i)},O=function(t,e){return k.w(s.toDate()[t].apply(s.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),s)},p=this.$W,f=this.$M,m=this.$D,j="set"+(this.$u?"UTC":"");switch(l){case d:return r?b(1,0):b(31,11);case u:return r?b(1,f):b(0,f+1);case o:var v=this.$locale().weekStart||0,g=(p<v?p+7:p)-v;return b(r?m-g:m+(6-g),f);case i:case h:return O(j+"Hours",0);case c:return O(j+"Minutes",1);case a:return O(j+"Seconds",2);case n:return O(j+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var s,o=k.p(t),l="set"+(this.$u?"UTC":""),b=(s={},s[i]=l+"Date",s[h]=l+"Date",s[u]=l+"Month",s[d]=l+"FullYear",s[c]=l+"Hours",s[a]=l+"Minutes",s[n]=l+"Seconds",s[r]=l+"Milliseconds",s)[o],O=o===i?this.$D+(e-this.$W):e;if(o===u||o===d){var p=this.clone().set(h,1);p.$d[b](O),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else b&&this.$d[b](O);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[k.p(t)]()},m.add=function(r,l){var h,b=this;r=Number(r);var O=k.p(l),p=function(t){var e=w(b);return k.w(e.date(e.date()+Math.round(t*r)),b)};if(O===u)return this.set(u,this.$M+r);if(O===d)return this.set(d,this.$y+r);if(O===i)return p(1);if(O===o)return p(7);var f=(h={},h[a]=e,h[c]=s,h[n]=t,h)[O]||1,m=this.$d.getTime()+r*f;return k.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,s=this.$locale();if(!this.isValid())return s.invalidDate||b;var r=t||"YYYY-MM-DDTHH:mm:ssZ",n=k.z(this),a=this.$H,c=this.$m,i=this.$M,o=s.weekdays,u=s.months,l=function(t,s,n,a){return t&&(t[s]||t(e,r))||n[s].slice(0,a)},d=function(t){return k.s(a%12||12,t,"0")},h=s.meridiem||function(t,e,s){var r=t<12?"AM":"PM";return s?r.toLowerCase():r},O={YY:String(this.$y).slice(-2),YYYY:this.$y,M:i+1,MM:k.s(i+1,2,"0"),MMM:l(s.monthsShort,i,u,3),MMMM:l(u,i),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:l(s.weekdaysMin,this.$W,o,2),ddd:l(s.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(a),HH:k.s(a,2,"0"),h:d(1),hh:d(2),a:h(a,c,!0),A:h(a,c,!1),m:String(c),mm:k.s(c,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:n};return r.replace(p,(function(t,e){return e||O[t]||n.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,h,b){var O,p=k.p(h),f=w(r),m=(f.utcOffset()-this.utcOffset())*e,j=this-f,v=k.m(this,f);return v=(O={},O[d]=v/12,O[u]=v,O[l]=v/3,O[o]=(j-m)/6048e5,O[i]=(j-m)/864e5,O[c]=j/s,O[a]=j/e,O[n]=j/t,O)[p]||j,b?v:k.a(v)},m.daysInMonth=function(){return this.endOf(u).$D},m.$locale=function(){return g[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var s=this.clone(),r=y(t,e,!0);return r&&(s.$L=r),s},m.clone=function(){return k.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},f}(),S=$.prototype;return w.prototype=S,[["$ms",r],["$s",n],["$m",a],["$H",c],["$W",i],["$M",u],["$y",d],["$D",h]].forEach((function(t){S[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,$,w),t.$i=!0),w},w.locale=y,w.isDayjs=_,w.unix=function(t){return w(1e3*t)},w.en=g[v],w.Ls=g,w.p={},w}))},"7c2a":function(t,e,s){"use strict";var r=s("7a23"),n=s("53f6"),a=s.n(n),c=s("8b82"),i=s.n(c);const o={key:0,class:"post-empty",style:{"margin-top":"16px"}},u=Object(r["i"])('<div class="post-empty__title"><div class="post-empty__circle red"></div><div class="post-empty__circle yellow"></div><div class="post-empty__circle green"></div></div><div class="post-empty__content">目前尚無動態，新增一則貼文吧！</div>',2),l=[u],d={class:"post",style:{"margin-top":"16px"}},h={class:"avatar"},b=["src"],O={key:1},p={key:0,class:"header__avatar__img",src:a.a,alt:""},f={key:1,class:"header__avatar__img",src:i.a,alt:""},m={style:{"margin-left":"16px"}},j={class:"avatar__text"},v={class:"post__content text-align-left"},g=["src"],_={key:1,class:"like-btn-empty",style:{"margin-top":"16px"}},y=["onClick"],w=Object(r["h"])("i",{class:"material-icons-outlined like-btn__icon"}," thumb_up ",-1),k=[w],$=Object(r["h"])("p",{class:"like-btn__text"},"成為第一個按讚的朋友",-1),S=["onClick"],M=Object(r["h"])("i",{class:"material-icons-outlined like-btn__icon"}," thumb_up ",-1),D={class:"like-btn__text"},x={class:"message-bar",style:{"margin-top":"16px"}},P={class:"avatar"},T=["src"],C={key:1},U={key:0,class:"avatar__img",src:a.a,alt:""},L={key:1,class:"avatar__img",src:i.a,alt:""},I={class:"message-bar__content",style:{"margin-left":"8px"}},Y={class:"message-bar__content__input"},H=["onUpdate:modelValue"],G=["onClick"],A={class:"message",style:{"margin-top":"16px"}},B={class:"avatar"},W=["src"],F={key:1,class:"avatar__img 12",src:i.a,alt:""},J={style:{"margin-left":"16px"}},N={class:"avatar__text"},V={class:"message__content"};function Z(t,e,s,n,a,c){const i=Object(r["D"])("router-link");return Object(r["w"])(),Object(r["g"])("div",null,[t.posts.length<=0?(Object(r["w"])(),Object(r["g"])("div",o,l)):(Object(r["w"])(!0),Object(r["g"])(r["a"],{key:1},Object(r["C"])(t.posts,(e,s)=>{var n;return Object(r["w"])(),Object(r["g"])("div",{key:s},[Object(r["h"])("div",d,[Object(r["h"])("div",h,[null!==(n=e.user)&&void 0!==n&&n.photo?(Object(r["w"])(),Object(r["g"])("img",{key:0,class:"avatar__img",src:e.user.photo},null,8,b)):(Object(r["w"])(),Object(r["g"])("div",O,["female"==e.user.sex?(Object(r["w"])(),Object(r["g"])("img",p)):(Object(r["w"])(),Object(r["g"])("img",f))])),Object(r["h"])("div",m,[Object(r["k"])(i,{to:"/personal/"+e.user._id,class:"link text-left"},{default:Object(r["M"])(()=>[Object(r["j"])(Object(r["G"])(e.user.name),1)]),_:2},1032,["to"]),Object(r["h"])("p",j,Object(r["G"])(t.timeToLocalTime(e.createdAt)),1)])]),Object(r["h"])("div",v,Object(r["G"])(e.content),1),""!==e.image?(Object(r["w"])(),Object(r["g"])("img",{key:0,class:"post__img",src:e.image},null,8,g)):Object(r["f"])("",!0),e.likes.length<=0?(Object(r["w"])(),Object(r["g"])("div",_,[Object(r["h"])("button",{class:"like-btn",onClick:r=>t.updateLike(e._id,s)},k,8,y),$])):(Object(r["w"])(),Object(r["g"])("button",{key:2,class:"like-btn primary-text",onClick:r=>t.updateLike(e._id,s),style:{"margin-top":"16px"}},[M,Object(r["h"])("p",D,Object(r["G"])(e.likes.length),1)],8,S)),Object(r["h"])("div",x,[Object(r["h"])("div",P,[t.userProfile.photo?(Object(r["w"])(),Object(r["g"])("img",{key:0,class:"avatar__img",src:t.userProfile.photo},null,8,T)):(Object(r["w"])(),Object(r["g"])("div",C,["female"==t.userProfile.sex?(Object(r["w"])(),Object(r["g"])("img",U)):(Object(r["w"])(),Object(r["g"])("img",L))]))]),Object(r["h"])("div",I,[Object(r["h"])("div",Y,[Object(r["N"])(Object(r["h"])("input",{type:"text",name:"message",placeholder:"留言...","onUpdate:modelValue":e=>t.comment[s]=e},null,8,H),[[r["J"],t.comment[s]]])]),Object(r["h"])("button",{class:"message-bar__content__btn",onClick:r=>t.addComment(e._id,s)},"留言",8,G)])]),(Object(r["w"])(!0),Object(r["g"])(r["a"],null,Object(r["C"])(e.comments,(e,s)=>(Object(r["w"])(),Object(r["g"])("div",{key:s},[Object(r["h"])("div",A,[Object(r["h"])("div",B,[e.user.photo?(Object(r["w"])(),Object(r["g"])("img",{key:0,class:"avatar__img",src:e.user.photo},null,8,W)):(Object(r["w"])(),Object(r["g"])("img",F)),Object(r["h"])("div",J,[Object(r["k"])(i,{to:"/personal/"+e.user._id,class:"link text-left"},{default:Object(r["M"])(()=>[Object(r["j"])(Object(r["G"])(e.user.name),1)]),_:2},1032,["to"]),Object(r["h"])("p",N,Object(r["G"])(t.timeToLocalTime(e.user.createdAt)),1)])]),Object(r["h"])("div",V,Object(r["G"])(e.comment),1)])]))),128))])])}),128))])}var z=s("cadb"),q=s("5502"),E=Object(r["l"])({name:"Posts",props:{posts:{type:Array,default:()=>[]}},setup(t){const e=Object(q["b"])(),s=Object(r["c"])(()=>t.posts),n=Object(r["B"])([]),a=Object(r["c"])(()=>e.getters["user/userProfile"]),c=async(t,r)=>{const n=s.value[r].likes.indexOf(a.value._id);-1==n?(s.value[r].likes.push(a.value._id),await e.dispatch("post/updateLikes",t)):(s.value[r].likes.splice(n,1),await e.dispatch("post/delLikes",t))},i=async(t,r)=>{const a=n.value[r],c=await e.dispatch("post/addComment",{postId:t,commentData:a});"success"===c.status&&(n.value[r]="",s.value[r].comments.push(c.data.comments))};return{posts:s,comment:n,timeToLocalTime:z["b"],userProfile:a,updateLike:c,addComment:i}}}),Q=s("d959"),K=s.n(Q);const R=K()(E,[["render",Z]]);e["a"]=R},"86e1":function(t,e,s){"use strict";var r=s("7a23");const n={class:"search-bar",style:{"margin-bottom":"12px"}},a={class:"dropdown"},c={class:"dropdown__btn"},i=Object(r["h"])("i",{class:"material-icons-outlined"}," expand_more ",-1),o={class:"dropdown__items"},u={class:"search-input"},l={class:"search-input__input"},d={class:"search-input__btn"};function h(t,e,s,h,b,O){return Object(r["w"])(),Object(r["g"])("div",n,[Object(r["h"])("div",a,[Object(r["h"])("div",c,[Object(r["h"])("p",null,Object(r["G"])(t.sortText),1),i]),Object(r["h"])("ul",o,[Object(r["h"])("li",{class:"dropdown__item",onClick:e[0]||(e[0]=e=>t.onSort("desc"))},"最新貼文"),Object(r["h"])("li",{class:"dropdown__item",onClick:e[1]||(e[1]=e=>t.onSort("asc"))},"最舊貼文")])]),Object(r["h"])("div",u,[Object(r["h"])("div",l,[Object(r["N"])(Object(r["h"])("input",{type:"text",name:"name",placeholder:"搜尋貼文","onUpdate:modelValue":e[2]||(e[2]=e=>t.keyword=e)},null,512),[[r["J"],t.keyword]])]),Object(r["h"])("button",d,[Object(r["h"])("i",{class:"material-icons-outlined",onClick:e[3]||(e[3]=(...e)=>t.onSearch&&t.onSearch(...e))},"search")])])])}var b=Object(r["l"])({name:"Searchbar",props:{sort:{type:String,default:"desc"}},setup(t,{emit:e}){const s=Object(r["B"])(""),n=Object(r["c"])(()=>"desc"===t.sort?"最新貼文":"最舊貼文"),a=t=>{e("sort",t)},c=()=>{e("search",{timeSort:t.sort,keyword:s.value})};return{keyword:s,sortText:n,onSort:a,onSearch:c}}}),O=s("d959"),p=s.n(O);const f=p()(b,[["render",h]]);e["a"]=f},"90ab":function(t,e,s){"use strict";s.r(e);var r=s("7a23");const n={key:0};function a(t,e,s,a,c,i){const o=Object(r["D"])("Track"),u=Object(r["D"])("Searchbar"),l=Object(r["D"])("Posts");return Object(r["w"])(),Object(r["g"])("div",null,[Object(r["k"])(r["b"],{name:"fade"},{default:Object(r["M"])(()=>[t.isSelf?Object(r["f"])("",!0):(Object(r["w"])(),Object(r["g"])("div",n,[Object(r["k"])(o)]))]),_:1}),t.isPostId?Object(r["f"])("",!0):(Object(r["w"])(),Object(r["e"])(u,{key:0,sort:t.sortby,onSort:t.sort,onSearch:t.search},null,8,["sort","onSort","onSearch"])),Object(r["k"])(l,{posts:t.postsList},null,8,["posts"])])}var c=s("5502"),i=s("6605"),o=s("53f6"),u=s.n(o),l=s("8b82"),d=s.n(l);const h={class:"track-container radius track",style:{"margin-bottom":"14px"}},b={class:"track-content"},O=["src"],p={key:1},f={key:0,class:"track-content__img",src:u.a,alt:""},m={key:1,class:"track-content__img",src:d.a,alt:""},j={style:{"margin-left":"16px"}},v={class:"track-content__name"},g={class:"track-content__text"};function _(t,e,s,n,a,c){return Object(r["w"])(),Object(r["g"])("div",h,[Object(r["h"])("div",b,[t.otherUserProfile.photo?(Object(r["w"])(),Object(r["g"])("img",{key:0,class:"track-content__img",src:t.otherUserProfile.photo,alt:"追蹤這照片"},null,8,O)):(Object(r["w"])(),Object(r["g"])("div",p,["female"==t.otherUserProfile.sex?(Object(r["w"])(),Object(r["g"])("img",f)):(Object(r["w"])(),Object(r["g"])("img",m))])),Object(r["h"])("div",j,[Object(r["h"])("p",v,Object(r["G"])(t.otherUserProfile.name),1),Object(r["h"])("p",g,Object(r["G"])(t.otherUserProfile.followersNum+" 人追蹤"),1)]),Object(r["h"])("button",{class:"btn secondary small",onClick:e[0]||(e[0]=e=>t.updateFollow())},Object(r["G"])(t.trackText),1)])])}function y(t){return 0===t?"0":t.toString().replace(/^0+/,"").replace(/[^0-9]/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}var w=Object(r["l"])({name:"Track",setup(){const t=Object(c["b"])(),e=Object(i["e"])(),s=Object(r["c"])(()=>e.params.id),n=Object(r["c"])(()=>t.getters["user/otherUserProfile"]),a=Object(r["B"])(!1),o=Object(r["B"])(""),u=Object(r["c"])(()=>t.getters["user/userProfile"]),l=()=>{a.value=n.value.followers.some(t=>t.user===u.value._id),o.value=a.value?"取消追蹤":"追蹤"},d=async()=>{a.value?await t.dispatch("user/delFolower",s.value):await t.dispatch("user/addFolower",s.value),await t.dispatch("user/getOtherUser",{id:s.value}),await l()};return Object(r["u"])(async()=>{await t.dispatch("user/getOtherUser",{id:s.value}),l()}),{thousandSeparator:y,userProfile:u,otherUserProfile:n,trackText:o,updateFollow:d}}}),k=(s("d23f"),s("d959")),$=s.n(k);const S=$()(w,[["render",_],["__scopeId","data-v-5a9655ba"]]);var M=S,D=s("86e1"),x=s("7c2a"),P=Object(r["l"])({name:"Personal",components:{Track:M,Searchbar:D["a"],Posts:x["a"]},setup(){var t;const e=Object(c["b"])(),s=Object(i["e"])(),n=null===(t=s.params)||void 0===t?void 0:t.id,a=Object(r["B"])([]),o=Object(r["B"])("desc"),u=Object(r["c"])(()=>{var t;return null===(t=e.getters["user/userProfile"])||void 0===t?void 0:t._id}),l=Object(r["B"])(""),d=Object(r["B"])("");Object(r["u"])(async()=>{const{postId:t}=s.query;if(t){const s=await e.dispatch("post/getOnePost",{postId:t});a.value.push(s.data),d.value=!0}else await e.dispatch("post/getUserPosts",{userId:n}),a.value.push(...h.value),d.value=!1;l.value=n==u.value});const h=Object(r["c"])(()=>{const t=e.getters["post/userPosts"];return t}),b=async t=>{a.value.length=0,o.value=t,await e.dispatch("post/getUserPosts",{userId:n,timeSort:t}),a.value.push(...h.value)},O=async t=>{a.value.length=0,await e.dispatch("post/getUserPosts",{userId:n,timeSort:t.sortType,keyword:t.keyword}),a.value.push(...h.value)};return Object(i["d"])(async(t,s)=>{a.value.length=0,d.value=!1;const r=t.params.id;l.value=u.value==r,await e.dispatch("post/initUserPosts"),await e.dispatch("post/getUserPosts",{userId:r}),a.value.push(...h.value)}),Object(i["c"])((t,s)=>{e.dispatch("post/initUserPosts")}),{isSelf:l,selfId:u,isPostId:d,paramsId:n,storePost:h,postsList:a,sortby:o,sort:b,search:O}}});const T=$()(P,[["render",a]]);e["default"]=T},cadb:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return c}));var r=s("5a0c"),n=s.n(r);function a(t){return n()(t).format("YYYY/MM/DD HH:mm:ss")}function c(t){const e=new Date,s=new Date(t);return n()(e).diff(s,"day")}},d23f:function(t,e,s){"use strict";s("3c3c")}}]);
//# sourceMappingURL=chunk-7f768f58.5ee9e31a.js.map